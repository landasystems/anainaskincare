<div ng-controller="l_penjualanCtrl">
    <div class="bg-light lter b-b wrapper-md">
        <h1 class="m-n font-thin h3">Laporan Penjualan</h1>
    </div>
    <div class="wrapper-md">
        <div class="panel panel-default">
            <div class="panel-heading">
                Laporan Penjualan
            </div>
            <div class="panel-body"  st-pipe="callServer" st-table="displayed">
                <form name="landaform" class="form-horizontal form-validation ">
                    <div class="col-md-6">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Cabang</label>
                                <div class="col-sm-9">
                                    <select class="form-control" st-search="cabang_id" style="width: 270px;">
                                        <option value="">-Semua Cabang-</option>
                                        <option ng-repeat="cabang in sCabang" value="{{cabang.id}}">{{cabang.nama}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Kategori</label>
                                <div class="col-sm-9">
                                    <select class="form-control" st-search="m_produk.kategori_id" style="width: 270px;">
                                        <option value="">-Semua Kategori-</option>
                                        <option ng-repeat="kategori in listkategori" value="{{kategori.id}}">{{kategori.nama| uppercase}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">Periode</label>
                                <div class="col-sm-9">
                                    <input class="form-control" st-search="tanggal" type="text" date-range-picker ng-model="tanggals" style="width: 270px;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <br><br>
                    <center style="width: 100%">
                        <div class="form-group">
                            <div class="col-sm-12">
                                <button type="button" class="btn btn-success fa fa-file-excel-o"  ng-click="excel()">&nbsp;Export Excel</button>
                                <button type="button" class="btn btn-primary fa  fa-search" ng-click="view()">&nbsp;Tampilkan</button>
                            </div>
                        </div>
                    </center>	
                </form>

                <div ng-show="detail_laporan" style="margin-top: 50px;" id="omset">
                    <div align="left">
                        <div align="LEFT">
                            <h3 style="margin: 0px">RUMAH CANTIK ANAINA</h3>
                            <p></p>
                            <h5 style="margin: 0px; font-weight: normal">CABANG : {{form.cabang}}</h5>
                            <div ng-bind-html="form.alamat"></div>
                            <div ng-bind-html="form.no_tlp"></div>
                        </div>
                        <p></p>
                        <p></p>
                        <center>
                            <h3 style="margin: 0px;">LAPORAN PENJUALAN</h3>
                            <p></p>
                            <p style="margin: 0px;"><div ng-bind-html="form.tgl"></div></p>
                            <p style="margin: 0px;"><div ng-bind-html="form.kategori"></div></p>
                        </center>
                        <br>
                        <p>Total Penjualan : <b>{{form.total| currency}}</b></p>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover" >
                                <thead>
                                    <tr>
                                        <th colspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>FAKTUR</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>CUSTOMER</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>KASIR</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>NAMA BARANG</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>JUMLAH</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>HARGA @</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>DISKON @</b></th>
                                        <th rowspan="2" align="center" style="text-align: center;vertical-align: middle;"><b>SUB TOTAL</b></th>
                                    </tr>
                                    <tr>
                                        <td align="center" style="text-align: center;vertical-align: middle;"><b>TANGGAL</b></td>
                                        <td align="center" style="text-align: center;vertical-align: middle;"><b>NO</b></td>
                                    </tr>
                                </thead>
                                <tbody ng-show="!isLoading">
                                    <tr ng-repeat="row in displayed" ng-dblclick="view(row)">
                                        <td>{{row.tanggal| date}}</td>
                                        <td>{{row.kode}}</td>
                                        <td>{{row.customer}}</td>
                                        <td>{{row.kasir}}</td>
                                        <td align="left"><div ng-bind-html="row.produk"></div></td>
                                        <td align="right"><div ng-bind-html="row.jumlah"></div></td>
                                        <td align="right"><div ng-bind-html="row.harga"></div></td>
                                        <td align="right"><div ng-bind-html="row.diskon"></div></td>
                                        <td align="right"><div ng-bind-html="row.sub_total"></div></td>


                                        <!--                                    <td>{{row.kode}}</td>
                                                                            <td>{{row.cabang}}</td>
                                                                            <td>{{(row.customer == null) ? "Umum" : row.customer}}</td>
                                                                            <td>{{row.tanggal| date}}</td>
                                                                            <td style="text-align: right;">{{row.total|  currency:undefined:0}}</td>
                                                                            <td>{{row.status}}</td>
                                                                            <td>
                                                                                <div class="btn-group pull-right" role="group" style="margin-top: -3px;">
                                                                                    <button type="button" class="btn btn-info fa fa-edit" ng-click="update(row)" ></button>
                                                                                    <button type="button" class="btn btn-danger fa fa-minus-circle" ng-click="delete(row);" ></button>
                                                                                </div> 
                                                                            </td>-->
                                    </tr>
                                </tbody>
                                <tbody ng-show="isLoading">
                                    <tr>
                                        <td colspan="9" class="text-center">Loading ... </td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td colspan="9" class="text-center" st-pagination="" st-items-by-page="10" st-template="tpl/blocks/pagination.custom.html"></td>
                                    </tr>
                            </table>		
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
